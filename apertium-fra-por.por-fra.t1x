<?xml version="1.0" encoding="UTF-8"?>
<!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>

    <def-cat n="nom">
      <cat-item tags="n.*"/>
    </def-cat>

    <def-cat n="ant">
      <cat-item tags="np.ant"/>
    </def-cat>

    <def-cat n="loc">
      <cat-item tags="np.loc"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>

    <def-cat n="querel">
      <cat-item lemma="que" tags="rel.*"/>
    </def-cat>

    <def-cat n="cuyo">
      <cat-item lemma="cuyo" tags="rel.*"/>
    </def-cat>

    <def-cat n="no">
      <cat-item lemma="no" tags="adv"/>
    </def-cat>

    <def-cat n="nada">
      <cat-item lemma="nada" tags="prn.*"/>
    </def-cat>

    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="det">
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="predet.*"/>
      <!-- <cat-item tags="num.*"/> -->
    </def-cat>

    <def-cat n="percent">
      <cat-item tags="num.percent"/>
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
    </def-cat>

    <def-cat n="num_uno">
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
      <cat-item lemma="uno" tags="prn.tn.f.sg"/>
      <cat-item lemma="uno" tags="prn.tn.m.sg"/>
      <cat-item lemma="uno" tags="det.ind.f.sg"/>
      <cat-item lemma="uno" tags="det.ind.m.sg"/>
    </def-cat>

    <def-cat n="numeral">
      <cat-item tags="num.*"/>
    </def-cat>

    <def-cat n="cifra">
      <cat-item tags="num"/>
    </def-cat>

    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="em">
      <cat-item lemma="em" tags="pr"/>
    </def-cat>

    <def-cat n="a">
      <cat-item lemma="a" tags="pr"/>
    </def-cat>

    <def-cat n="acabar">
      <cat-item lemma="acabar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="continuar">
      <cat-item lemma="continuar" tags="vblex.*"/>
      <cat-item lemma="seguir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="ir">
      <cat-item lemma="ir" tags="vblex.*"/>
      <cat-item lemma="vir" tags="vblex.*"/>
    </def-cat>

    <def-cat n="irpp">
      <cat-item lemma="ir" tags="vblex.pp.*"/>
      <cat-item lemma="vir" tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="volver">
      <cat-item lemma="voltar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="prnperssubj">
      <!-- pronoms personals -->
      <cat-item lemma="eu" tags="prn.*"/>
      <cat-item lemma="tu" tags="prn.*"/>
      <cat-item lemma="ele" tags="prn.*"/>
      <cat-item lemma="nós" tags="prn.*"/>
      <!-- vós? rare but possible -->
      <cat-item lemma="vocês" tags="prn.*"/>
    </def-cat>

    <def-cat n="prnsubj">
      <!-- prn no personals que poden ser subjecte -->
      <cat-item tags="prn.tn.*"/>
      <cat-item lemma="quel" tags="prn.itg.*"/>
      <cat-item lemma="qui" tags="prn.itg.*"/>
      <cat-item lemma="lequel" tags="prn.itg.*"/>
      <!-- falta afegir als dicos -->
    </def-cat>

    <def-cat n="prnitg">
      <cat-item tags="prn.itg.*"/>
    </def-cat>

    <def-cat n="rel">
      <cat-item tags="rel.*"/>
    </def-cat>

    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>

    <def-cat n="ser">
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbser.fts.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.pri.*"/>
    </def-cat>

    <def-cat n="aux">
      <!-- verbs que fan d'aux seguits de pp -->
      <cat-item tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="imp">
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbmod.imp.*"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="verbm">
      <!-- verb modal -->
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="verbm_inf_ger">
      <!-- verb modal, infinitiu o gerundi -->
      <cat-item tags="vbmod.inf"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="haver">
      <cat-item tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="estar">
      <cat-item lemma="estar" tags="vblex.*"/>
    </def-cat>

    <def-cat n="verbpers">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
      <cat-item tags="vblex.fts.*"/>
      <cat-item tags="vblex.pmp.*"/>
      <cat-item tags="vblex.infps.*"/>
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbser.fts.*"/>
      <cat-item tags="vbser.pmp.*"/>
      <cat-item tags="vbser.infps.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbhaver.fts.*"/>
      <cat-item tags="vbhaver.pmp.*"/>
      <cat-item tags="vbhaver.infps.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>
      <cat-item tags="vbmod.fts.*"/>
      <cat-item tags="vbmod.pmp.*"/>
      <cat-item tags="vbmod.infps.*"/>
      <cat-item tags="vblex.pron.cni.*"/>
      <cat-item tags="vblex.pron.fti.*"/>
      <cat-item tags="vblex.pron.ifi.*"/>
      <cat-item tags="vblex.pron.imp.*"/>
      <cat-item tags="vblex.pron.pii.*"/>
      <cat-item tags="vblex.pron.pis.*"/>
      <cat-item tags="vblex.pron.pri.*"/>
      <cat-item tags="vblex.pron.prs.*"/>
      <cat-item tags="vblex.pron.pmp.*"/>
      <cat-item tags="vblex.pron.infps.*"/>
    </def-cat>

    <def-cat n="auxpers">
      <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbser.pmp.*"/>
      <cat-item tags="vbser.infps.*"/>
      <cat-item tags="vbhaver.cni.*"/>
      <cat-item tags="vbhaver.fti.*"/>
      <cat-item tags="vbhaver.ifi.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbhaver.pii.*"/>
      <cat-item tags="vbhaver.pis.*"/>
      <cat-item tags="vbhaver.pri.*"/>
      <cat-item tags="vbhaver.prs.*"/>
      <cat-item tags="vbhaver.pmp.*"/>
      <cat-item tags="vbhaver.infps.*"/>
    </def-cat>

    <def-cat n="auxinf">
      <!--       <cat-item tags="vbser.inf"/> -->
      <cat-item tags="vbhaver.inf"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <!-- ATENCI? CANVI -->
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.pron.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>

    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>

    <def-cat n="ne">
      <cat-item lemma="ne" tags="adv"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item lemma="y" tags="cnjcoo"/>
      <cat-item lemma="o" tags="cnjcoo"/>
      <cat-item lemma="pero" tags="cnjcoo"/>
    </def-cat>

    <def-cat n="cnj">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjsub"/>
      <cat-item tags="cnjadv"/>
    </def-cat>

    <def-cat n="per">
      <cat-item lemma="per" tags="pr"/>
    </def-cat>

    <def-cat n="de">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>

    <def-cat n="cada">
      <cat-item lemma="cada" tags="det.ind.mf.sg"/>
    </def-cat>

    <def-cat n="puntuac">
      <cat-item tags="sent"/>
      <cat-item tags="cm"/>
      <cat-item tags="lquest"/>
    </def-cat>

    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>

    <def-cat n="coma">
      <cat-item tags="cm"/>
    </def-cat>

    <def-cat n="lquest">
      <cat-item tags="lquest"/>
    </def-cat>

    <def-cat n="tanto">
      <!-- take this lemma no matter how the tagger tags it -->
      <cat-item lemma="tanto" tags="adj.*"/>
      <cat-item lemma="tanto" tags="adv"/>
    </def-cat>

    <def-cat n="tão">
      <cat-item lemma="tão" tags="preadv"/>
    </def-cat>

    <def-cat n="quanto">
      <!-- take these lemmas (lemmata?) no matter how the tagger tags them -->
      <!-- and pray it doesn't tag 'como' as comer<vblex>... -->
      <cat-item lemma="quanto" tags="adv.*"/>
      <cat-item lemma="quanto" tags="rel.*"/>
      <cat-item lemma="quanto" tags="prn.*"/>
      <cat-item lemma="como" tags="adv.*"/>
      <cat-item lemma="como" tags="rel.*"/>
      <cat-item lemma="como" tags="pr.*"/>
      <cat-item lemma="como" tags="cnjadv.*"/>
    </def-cat>

    <def-cat n="este">
      <cat-item lemma="este" tags="det.*"/>
    </def-cat>

    <def-cat n="aquele">
      <cat-item lemma="aquele" tags="det.*"/>
    </def-cat>

  </section-def-cats>


  <section-def-attrs>

    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np.loc"/>
      <attr-item tags="np.ant"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="adj.sint.comp"/>
      <attr-item tags="adj.sint.sup"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.ind"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vbhaver.pp"/>
      <attr-item tags="vbser.pp"/>
    </def-attr>

    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="num"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="pron">
      <attr-item tags="pron"/>
    </def-attr>

    <def-attr n="sep">
      <attr-item tags="sep"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
    </def-attr>

    <def-attr n="a_rel">
      <attr-item tags="rel"/>
      <attr-item tags="rel.adv"/>
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="rel"/>
      <attr-item tags="rel.adv"/>
      <attr-item tags="rel.nn"/>
      <attr-item tags="rel.an"/>
      <attr-item tags="obj"/>
      <attr-item tags="tn"/>
      <attr-item tags="tn.ref"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
      <attr-item tags="tn.pos"/>
    </def-attr>

    <def-attr n="tipoenc_pro">
      <attr-item tags="ref.p3.mf.sp"/>
      <attr-item tags="p1.mf.pl"/>
      <attr-item tags="p1.mf.sg"/>
      <attr-item tags="p2.mf.pl"/>
      <attr-item tags="p2.mf.sg"/>
      <attr-item tags="p3.f.pl"/>
      <attr-item tags="p3.f.sg"/>
      <attr-item tags="p3.mf.pl"/>
      <attr-item tags="p3.mf.sg"/>
      <attr-item tags="p3.m.pl"/>
      <attr-item tags="p3.m.sg"/>
      <attr-item tags="p3.nt"/>
      <attr-item tags="mf.sg"/>
      <attr-item tags="adv"/>
    </def-attr>

    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
      <attr-item tags="GD"/>
    </def-attr>

    <def-attr n="gen_sense_mf">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="gen_mf">
      <attr-item tags="mf"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="nbr_sense_sp">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="nbr_sp">
      <attr-item tags="sp"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="fts"/>
      <attr-item tags="fti"/>
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="prs"/>
      <attr-item tags="infps"/>
      <attr-item tags="pmp"/>
      <attr-item tags="pp"/>
      <!-- ? -->
      <attr-item tags="ger"/>
      <!-- ? -->
      <attr-item tags="inf"/>
      <!-- ? -->
    </def-attr>

    <def-attr n="neg">
      <attr-item tags="NEG"/>
    </def-attr>

  </section-def-attrs>


  <section-def-vars>
    <def-var n="treu_ref"/>
    <def-var n="nbr_pp"/>
    <def-var n="gen_pp"/>
    <def-var n="etiq_aux"/>
    <def-var n="etiq_det"/>
    <def-var n="concorden"/>
    <def-var n="numero" v="&lt;sg&gt;"/>
    <def-var n="genero" v="&lt;m&gt;"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="caseFirstWord"/>
    <def-var n="lema"/>
    <def-var n="EOS" v="true"/>
    <def-var n="paraula1"/>
    <def-var n="SVnegatiu"/>
    <def-var n="auxiliar"/>
    <def-var n="art_np"/>
  </section-def-vars>


  <section-def-lists>
    <def-list n="vbpron"> <!-- verbos no pronominales en español y pronominales en francés -->
      <list-item v="disfrutar"/>
    </def-list>

    <def-list n="verbs_ref"> <!-- se elimina el pronombre reflexivo al traducir al francés -->
      <list-item v="codear# con"/>
      <list-item v="enamorar"/>
      <list-item v="posicionar"/>
      <list-item v="aficionar"/>
      <list-item v="estrenar"/>
      <list-item v="divorciar"/>
      <list-item v="concienciar"/>
      <list-item v="incautar"/>
      <list-item v="despedir# de"/>
      <list-item v="despedir"/>
    </def-list>

    <def-list n="vbambser">
      <list-item v="aller"/>
      <list-item v="tomber# amoureux"/>
      <list-item v="accourir"/>
      <list-item v="advenir"/>
      <list-item v="arriver"/>
      <list-item v="décéder"/>
      <list-item v="entrer"/>
      <list-item v="rentrer"/>
      <list-item v="mourir"/>
      <list-item v="naître"/>
      <list-item v="partir"/>
      <list-item v="repartir"/>
      <list-item v="rester"/>
      <list-item v="tomber"/>
      <list-item v="retomber"/>
      <list-item v="venir"/>
      <list-item v="parvenir"/>
      <list-item v="intervenir"/>
      <list-item v="revenir"/>
      <list-item v="devenir"/>
      <list-item v="abaisser"/>
      <list-item v="baisser"/>
      <list-item v="descendre"/>
      <list-item v="redescendre"/>
      <list-item v="monter"/>
      <list-item v="remonter"/>
      <list-item v="sortir"/>
      <list-item v="ressortir"/>
      <list-item v="passer"/>
      <list-item v="apparaître"/>
      <list-item v="imposer"/>
    </def-list>

    <def-list n="meses">
      <list-item v="enero"/>
      <list-item v="febrero"/>
      <list-item v="marzo"/>
      <list-item v="abril"/>
      <list-item v="mayo"/>
      <list-item v="junio"/>
      <list-item v="julio"/>
      <list-item v="agosto"/>
      <list-item v="septiembre"/>
      <list-item v="octubre"/>
      <list-item v="noviembre"/>
      <list-item v="diciembre"/>
    </def-list>

    <def-list n="adv_neg">
      <list-item v="jamais"/>
    </def-list>

    <def-list n="part_sing">
      <list-item v="eau"/>
      <list-item v="beurre"/>
      <list-item v="limonade"/>
      <list-item v="vin"/>
      <list-item v="bière"/>
      <list-item v="viande"/>
      <list-item v="pain"/>
      <list-item v="farine"/>
      <list-item v="chance"/>
    </def-list>

    <def-list n="npf">
      <list-item v="Afrique"/>
      <list-item v="Afrique australe"/>
      <list-item v="Afrique du Sud"/>
      <list-item v="Afrique Noire"/>
      <list-item v="Afrique-Occidentale Française"/>
      <list-item v="Afrique-Orientale Allemande"/>
      <list-item v="Afrique-Orientale Anglaise"/>
      <list-item v="Afrique-Équatoriale Française"/>
      <list-item v="Afrique subsaharienne"/>
      <list-item v="Allemagne"/>
      <list-item v="Alsace"/>
      <list-item v="Amérique"/>
      <list-item v="Amérique du Nord"/>
      <list-item v="Amérique du Sud"/>
      <list-item v="Andalousie"/>
      <list-item v="Andorre"/>
      <list-item v="Angleterre"/>
      <list-item v="Arabie"/>
      <list-item v="Arabie Saoudite"/>
      <list-item v="Argentine"/>
      <list-item v="Asie"/>
      <list-item v="Asie"/>
      <list-item v="Australie"/>
      <list-item v="Autriche"/>
      <list-item v="Belgique"/>
      <list-item v="Biélorussie"/>
      <list-item v="Birmanie"/>
      <list-item v="Biscaye"/>
      <list-item v="Bolivie"/>
      <list-item v="Bosnie"/>
      <list-item v="Bosnie-Herzégovine"/>
      <list-item v="Bretagne"/>
      <list-item v="Bulgarie"/>
      <list-item v="Cantabrie"/>
      <list-item v="Caroline du Nord"/>
      <list-item v="Caroline du Sud"/>
      <list-item v="Catalogne"/>
      <list-item v="Centrafrique"/>
      <list-item v="Chine"/>
      <list-item v="Cisjordanie"/>
      <list-item v="Colombie"/>
      <list-item v="Corée"/>
      <list-item v="Corée du Nord"/>
      <list-item v="Corée du Sud"/>
      <list-item v="Croatie"/>
      <list-item v="Côte d'Ivoire"/>
      <list-item v="Espagne"/>
      <list-item v="Estonie"/>
      <list-item v="Estrémadure"/>
      <list-item v="Europe"/>
      <list-item v="Europe de l'Ouest"/>
      <list-item v="Finlande"/>
      <list-item v="France"/>
      <list-item v="Galice"/>
      <list-item v="Gambie"/>
      <list-item v="Grande-Bretagne"/>
      <list-item v="Grèce"/>
      <list-item v="Grenade"/>
      <list-item v="Guadeloupe"/>
      <list-item v="Guinée"/>
      <list-item v="Guinée-Bissau"/>
      <list-item v="Guinée-Équatorale"/>
      <list-item v="Guyana"/>
      <list-item v="Guyane"/>
      <list-item v="Guyane Française"/>
      <list-item v="Hollande"/>
      <list-item v="Hongrie"/>
      <list-item v="Inde"/>
      <list-item v="Indochine"/>
      <list-item v="Indonésie"/>
      <list-item v="Irlande"/>
      <list-item v="Irlande du Nord"/>
      <list-item v="Islande"/>
      <list-item v="Italie"/>
      <list-item v="Jamaïque"/>
      <list-item v="Jordanie"/>
      <list-item v="Lettonie"/>
      <list-item v="Libie"/>
      <list-item v="Libéria"/>
      <list-item v="Libye"/>
      <list-item v="Lituanie"/>
      <list-item v="Macédonie"/>
      <list-item v="Malte"/>
      <list-item v="Mauritanie"/>
      <list-item v="Micronésie"/>
      <list-item v="Moldavie"/>
      <list-item v="Mésopotamie"/>
      <list-item v="Namibie"/>
      <list-item v="Navarre"/>
      <list-item v="Normandie"/>
      <list-item v="Norvège"/>
      <list-item v="Nouvelle-Calédonie"/>
      <list-item v="Nouvelle-Zélande"/>
      <list-item v="Océanie"/>
      <list-item v="Occitanie"/>
      <list-item v="Ossétie"/>
      <list-item v="Ossétie du Sud"/>
      <list-item v="Palestine"/>
      <list-item v="Papouasie-Nouvelle-Guinée"/>
      <list-item v="Pennsylvanie"/>
      <list-item v="Pologne"/>
      <list-item v="Prusse"/>
      <list-item v="Prusse Occidentale"/>
      <list-item v="Prusse-Orientale"/>
      <list-item v="Rhénanie"/>
      <list-item v="Rhénanie Nord-Westphalie"/>
      <list-item v="Rioja"/>
      <list-item v="Roumanie"/>
      <list-item v="République Dominicaine"/>
      <list-item v="République tchèque"/>
      <list-item v="Russie"/>
      <list-item v="Scandinavie"/>
      <list-item v="Serbie"/>
      <list-item v="Sibérie"/>
      <list-item v="Slovaquie"/>
      <list-item v="Slovénie"/>
      <list-item v="Sénégambie"/>
      <list-item v="Somalie"/>
      <list-item v="Suède"/>
      <list-item v="Suisse"/>
      <list-item v="Syrie"/>
      <list-item v="Tanzanie"/>
      <list-item v="Tasmanie"/>
      <list-item v="Tchécoslovaquie"/>
      <list-item v="Tchétchénie"/>
      <list-item v="Thaïlande"/>
      <list-item v="Thaïlande"/>
      <list-item v="Éthiopie"/>
      <list-item v="Trinité-et-Tobago"/>
      <list-item v="Tunisie"/>
      <list-item v="Turquie"/>
      <list-item v="Ukraine"/>
      <list-item v="Ukraine subcarpatique"/>
      <list-item v="Westphalie"/>
      <list-item v="Yougoslavie"/>
      <list-item v="Zambie"/>
      <list-item v="Zélande"/>
    </def-list>

    <def-list n="npm">
      <list-item v="Afghanistan"/>
      <list-item v="Alger"/>
      <list-item v="Alger"/>
      <list-item v="Amsterdam"/>
      <list-item v="Atlantique"/>
      <list-item v="Bahrein"/>
      <list-item v="Bangladesh"/>
      <list-item v="Belize"/>
      <list-item v="Bernabéu"/>
      <list-item v="Bhoutan"/>
      <list-item v="Botswana"/>
      <list-item v="Brésil"/>
      <list-item v="Burkina Faso"/>
      <list-item v="Burundi"/>
      <list-item v="Cambogde"/>
      <list-item v="Cameroun"/>
      <list-item v="Canada"/>
      <list-item v="Cancun"/>
      <list-item v="Cap Vert"/>
      <list-item v="Caraïbe"/>
      <list-item v="Chili"/>
      <list-item v="Chypre"/>
      <list-item v="Congo"/>
      <list-item v="Costa Rica"/>
      <list-item v="Cuba"/>
      <list-item v="Danemark"/>
      <list-item v="Djibouti"/>
      <list-item v="Elysée"/>
      <list-item v="Euskal Herria"/>
      <list-item v="Gabon"/>
      <list-item v="Gaza"/>
      <list-item v="Ghana"/>
      <list-item v="Gibraltar"/>
      <list-item v="Groenland"/>
      <list-item v="Guatemala"/>
      <list-item v="Égypte"/>
      <list-item v="Égypte"/>
      <list-item v="Haïti"/>
      <list-item v="Honduras"/>
      <list-item v="Irak"/>
      <list-item v="Iran"/>
      <list-item v="Israël"/>
      <list-item v="Jamaïque"/>
      <list-item v="Japon"/>
      <list-item v="Japon"/>
      <list-item v="Kazakhstan"/>
      <list-item v="Kenya"/>
      <list-item v="Kirghizistan"/>
      <list-item v="Koweït"/>
      <list-item v="Laos"/>
      <list-item v="Liban"/>
      <list-item v="Liechtenstein"/>
      <list-item v="Luxembourg"/>
      <list-item v="Maghreb"/>
      <list-item v="Maghreb"/>
      <list-item v="Malawi"/>
      <list-item v="Mali"/>
      <list-item v="Maroc"/>
      <list-item v="Mexique"/>
      <list-item v="Monténégro"/>
      <list-item v="Mozambique"/>
      <list-item v="Myanmar"/>
      <list-item v="Nassau"/>
      <list-item v="Nicaragua"/>
      <list-item v="Niger"/>
      <list-item v="Nigeria"/>
      <list-item v="Népal"/>
      <list-item v="Oman"/>
      <list-item v="Oran"/>
      <list-item v="Ouganda"/>
      <list-item v="Ouzbékistan"/>
      <list-item v="Pakistan"/>
      <list-item v="Panamá"/>
      <list-item v="Panama"/>
      <list-item v="Paraguay"/>
      <list-item v="Pays Basque"/>
      <list-item v="Perse"/>
      <list-item v="Piémont"/>
      <list-item v="Pluton"/>
      <list-item v="Porto Rico"/>
      <list-item v="Portugal"/>
      <list-item v="Pérou"/>
      <list-item v="Qatar"/>
      <list-item v="Équateur"/>
      <list-item v="Équateur"/>
      <list-item v="Québec"/>
      <list-item v="Royaume-Uni"/>
      <list-item v="Royaume-Uni de Grande-Bretagne et d'Irlande"/>
      <list-item v="Royaume-Uni de Grande-Bretagne et d'Irlande du Nord"/>
      <list-item v="Rwanda"/>
      <list-item v="Salvador"/>
      <list-item v="Saturne"/>
      <list-item v="Singapour"/>
      <list-item v="Sénégal"/>
      <list-item v="Sénégal"/>
      <list-item v="São Tomé-et-Principe"/>
      <list-item v="Soudan"/>
      <list-item v="Soudan"/>
      <list-item v="Sri Lanka"/>
      <list-item v="Surinam"/>
      <list-item v="Swaziland"/>
      <list-item v="Tadjikistan"/>
      <list-item v="Tanger"/>
      <list-item v="Taïwan"/>
      <list-item v="Tchad"/>
      <list-item v="Téhéran"/>
      <list-item v="Timor oriental"/>
      <list-item v="Togo"/>
      <list-item v="Tétouan"/>
      <list-item v="Turkménistan"/>
      <list-item v="Uranus"/>
      <list-item v="Uruguay"/>
      <list-item v="Vatican"/>
      <list-item v="Venezuela"/>
      <list-item v="Viêt nam"/>
      <list-item v="Vénus"/>
      <list-item v="Yémen"/>
      <list-item v="Zagreb"/>
      <list-item v="Zaïre"/>
      <list-item v="Zimbabwe"/>
    </def-list>

    <def-list n="nppl">
      <list-item v="Alpes"/>
      <list-item v="Alpes-Maritimes"/>
      <list-item v="Amériques"/>
      <list-item v="Asturies"/>
      <list-item v="Baléares"/>
      <list-item v="Canaries"/>
      <list-item v="EE.UU."/>
      <list-item v="Philippines"/>
      <list-item v="Pyrénées"/>
      <list-item v="Pyrénées-Atlantiques"/>
      <list-item v="Fidji"/>
      <list-item v="Hawaii"/>
      <list-item v="Maurice"/>
    </def-list>

    <def-list n="adj_colloc_abans">
      <list-item v="autre"/>
      <list-item v="beau"/>
      <list-item v="bon"/>
      <list-item v="dernier"/>
      <list-item v="deuxième"/>
      <list-item v="grand"/>
      <list-item v="gros"/>
      <list-item v="jeune"/>
      <list-item v="joli"/>
      <list-item v="lourd"/>
      <list-item v="mauvais"/>
      <list-item v="meilleur"/>
      <list-item v="moindre"/>
      <list-item v="nouveau"/>
      <list-item v="petit"/>
      <list-item v="pire"/>
      <list-item v="premier"/>
      <list-item v="second"/>
      <list-item v="vieux"/>
      <list-item v="vrai"/>
    </def-list>

  </section-def-lists>


  <section-def-macros>

    <def-macro n="control_ref" npar="2">
      <!-- canvia el lema dels verbs ref i elimina el prn si cal -->
      <let>
        <var n="treu_ref"/>
        <lit v=""/>
      </let>
      <choose>
        <!-- prn ref?... -->
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <or>
                  <equal>
                    <clip pos="2" side="sl" part="pers"/>
                    <lit-tag v="p3"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </or>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <choose>
            <!-- canvia aquests verbs -->
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <list n="verbs_ref"/>
                </in>
              </test>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="enamorar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="tomber# amoureux"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="incautar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="saisir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="despedir"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="dire# au revoir"/>
                  </let>
                </when>

                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="posicionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="prendre# position"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="codear# con"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="côtoyer"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="estrenar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="débuter"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="concienciar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="prendre# conscience"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="aficionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="prendre# goût"/>
                  </let>
                </when>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </let>
            </when>
            <otherwise> <!-- se cambia la traducción sin quitar el pronombre reflexivo -->
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="acordar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="rappeler"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="ilusionar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="réjouir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="agazapar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="tapir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="apelotonar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="agglutiner"/>
                  </let>
                </when>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v=""/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="control_ref_aux" npar="3">
      <!-- canvia el lema dels verbs ref i elimina el prn si cal -->
      <let>
        <var n="treu_ref"/>
        <lit v=""/>
      </let>
      <choose>
        <!-- prn ref?... -->
        <when>
          <test>
            <or>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <or>
                  <equal>
                    <clip pos="2" side="sl" part="pers"/>
                    <lit-tag v="p3"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="inf"/>
                  </equal>
                  <equal>
                    <clip pos="2" side="sl" part="temps"/>
                    <lit-tag v="ger"/>
                  </equal>
                </or>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
              </and>
            </or>
          </test>
          <choose>
            <!-- canvia aquests verbs -->
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <list n="verbs_ref"/>
                </in>
              </test>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="apaixonar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="tomber# amoureux"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="aficionar"/> <!-- FIXME -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="prendre# goût"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="apreender"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="saisir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="despedir"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="dire# au revoir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="posicionar"/> <!-- FIXME -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="prendre# position"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="estrear"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="débuter"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="concienciar"/> <!-- FIXME -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="prendre# conscience"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="codear# con"/> <!-- FIXME -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="côtoyer"/>
                  </let>
                </when>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </let>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="lembrar"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="rappeler"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="ilusionar"/> <!-- FIXME -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="réjouir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="agazapar"/> <!-- FIXME -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="tapir"/>
                  </let>
                </when>
                <when>
                  <test>
                    <equal caseless="yes">
                      <clip pos="3" side="sl" part="lem"/>
                      <lit v="apelotonar"/> <!-- FIXME -->
                    </equal>
                  </test>
                  <let>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit v="agglutiner"/>
                  </let>
                </when>
              </choose>
              <let>
                <var n="treu_ref"/>
                <lit v=""/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="envia_pas" npar="1">
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="1" side="sl" part="lem"/>
              <lit v="não"/>
            </equal>
          </test>
          <out>
            <b/>
            <chunk name="pas">
              <tags>
                <tag>
                  <lit-tag v="adv"/></tag>
              </tags>
              <lu>
                <lit v="pas"/>
                <lit-tag v="adv"/>
              </lu>
            </chunk>
          </out>
        </when>
      </choose>
    </def-macro>

    <!-- aquesta macro és per si no resolem el problmema haber/hay via tagger -->
    <def-macro n="haber" npar="1">
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="haber"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="pers"/>
                <lit-tag v="p3"/>
              </equal>
              <equal>
                <clip pos="1" side="sl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
            </and>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="y avoir"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="a_verb"/>
            <lit-tag v="vblex"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="def_det" npar="2">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="etiq_det"/>
            <lit-tag v="det.def.mf.pl"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="2" side="tl" part="gen"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <var n="etiq_det"/>
                <lit-tag v="det.def.f.sg"/>
              </let>
            </when>
            <otherwise>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="m"/>
                    </equal>
                  </test>
                  <let>
                    <var n="etiq_det"/>
                    <lit-tag v="det.def.m.sg"/>
                  </let>
                </when>
                <otherwise>
                  <choose>
                    <when>
                      <test>
                        <equal>
                          <clip pos="1" side="sl" part="gen"/>
                          <lit-tag v="f"/>
                        </equal>
                      </test>
                      <let>
                        <var n="etiq_det"/>
                        <lit-tag v="det.def.f.sg"/>
                      </let>
                    </when>
                    <otherwise>
                      <let>
                        <var n="etiq_det"/>
                        <lit-tag v="det.def.m.sg"/>
                      </let>
                    </otherwise>
                  </choose>
                </otherwise>
              </choose>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="fts" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="fts"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="pii"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="infps" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="infps"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="temps"/>
            <lit-tag v="prs"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_imp" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="imp"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="pers"/>
                <lit-tag v="p2"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_imp_enc" npar="2">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="temps"/>
              <lit-tag v="imp"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="pers"/>
                <lit-tag v="p2"/>
              </let>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
              <choose>
                <when>
                  <test>
                    <equal>
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="se"/>
                    </equal>
                  </test>
                  <let>
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="vous"/>
                  </let>
                  <let>
                    <clip pos="2" side="tl" part="tipoenc_pro"/>
                    <lit-tag v="p2.mf.pl"/>
                  </let>
                </when>
              </choose>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="firstWord" npar="1">
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="a_np_acr"/>
              <lit v=""/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="EOS"/>
                  <lit v="true"/>
                </equal>
              </test>
              <modify-case>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="aa"/>
              </modify-case>
              <let>
                <var n="caseFirstWord"/>
                <lit v="Aa"/>
              </let>
            </when>
          </choose>
        </when>
        <otherwise>
          <let>
            <var n="caseFirstWord"/>
            <lit v="aa"/>
          </let>
        </otherwise>
      </choose>
      <let>
        <var n="EOS"/>
        <lit v="false"/>
      </let>
    </def-macro>

<!-- Per mirar si el blanc cont?o no format. Cal posar aquesta funci?en les regles en qu?desaparegui
     alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar.
     Si cont?format cal conservar-la, si no en cont?cal eliminar-la perqu?no apareguin dos espais seguits. -->
    <def-macro n="f_bcond" npar="2">
       <choose>
        <when>
          <test>
            <not>
              <equal>
                <b pos="1"/>
                <lit v=" "/>
              </equal>
            </not>
          </test>
          <out>
            <b pos="1"/>
          </out>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_nploc" npar="1">
      <let>
        <var n="art_np"/>
        <lit v=""/>
      </let>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="a_nom"/>
              <lit-tag v="np.loc"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <in caseless="no">
                  <clip pos="1" side="tl" part="lem"/>
                  <list n="npf"/>
                </in>
              </test>
              <let>
                <var n="art_np"/>
                <concat>
                  <lit v="le"/>
                  <lit-tag v="det.def.f.sg"/>
                </concat>
              </let>
              <let>
                <var n="genero"/>
                <lit-tag v="f"/>
              </let>
              <let>
                <var n="numero"/>
                <lit-tag v="sg"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <in caseless="no">
                  <clip pos="1" side="tl" part="lem"/>
                  <list n="npm"/>
                </in>
              </test>
              <let>
                <var n="art_np"/>
                <concat>
                  <lit v="le"/>
                  <lit-tag v="det.def.m.sg"/>
                </concat>
              </let>
              <let>
                <var n="genero"/>
                <lit-tag v="m"/>
              </let>
              <let>
                <var n="numero"/>
                <lit-tag v="sg"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <in caseless="no">
                  <clip pos="1" side="tl" part="lem"/>
                  <list n="nppl"/>
                </in>
              </test>
              <let>
                <var n="art_np"/>
                <concat>
                  <lit v="le"/>
                  <lit-tag v="det.def.mf.pl"/>
                </concat>
              </let>
              <let>
                <var n="genero"/>
                <lit-tag v="mf"/>
              </let>
              <let>
                <var n="numero"/>
                <lit-tag v="pl"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
    </def-macro>


    <def-macro n="det_nb" npar="1">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <var n="numero"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <otherwise>
              <let>
                <var n="numero"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="det_nb2" npar="2">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <var n="numero"/>
                <clip pos="1" side="sl" part="nbr"/>
              </let>
            </when>
            <otherwise>
              <call-macro n="det_nb">
                <with-param pos="2"/>
              </call-macro>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="det_nb3" npar="3">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="nbr"/>
                    <lit-tag v="sg"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </or>
              </test>
              <let>
                <var n="numero"/>
                <clip pos="1" side="sl" part="nbr"/>
              </let>
            </when>
            <otherwise>
              <call-macro n="det_nb2">
                <with-param pos="2"/>
                <with-param pos="3"/>
              </call-macro>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="det_gd" npar="1">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="tl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <var n="genero"/>
                <lit-tag v="f"/>
              </let>
            </when>
            <otherwise>
              <let>
                <var n="genero"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="det_gd2" npar="2">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="tl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="gen"/>
                    <lit-tag v="m"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </or>
              </test>
              <let>
                <var n="genero"/>
                <clip pos="1" side="sl" part="gen"/>
              </let>
            </when>
            <otherwise>
              <call-macro n="det_gd">
                <with-param pos="2"/>
              </call-macro>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="det_gd3" npar="3">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="tl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="gen"/>
                    <lit-tag v="m"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </or>
              </test>
              <let>
                <var n="genero"/>
                <clip pos="1" side="sl" part="gen"/>
              </let>
            </when>
            <otherwise>
              <call-macro n="det_gd2">
                <with-param pos="2"/>
                <with-param pos="3"/>
              </call-macro>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="det_gd4" npar="4">
      <choose>
        <when>
          <test>
            <or>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </equal>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </equal>
            </or>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="tl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="gen"/>
                    <lit-tag v="m"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </or>
              </test>
              <let>
                <var n="genero"/>
                <clip pos="1" side="sl" part="gen"/>
              </let>
            </when>
            <otherwise>
              <call-macro n="det_gd3">
                <with-param pos="2"/>
                <with-param pos="3"/>
                <with-param pos="4"/>
              </call-macro>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>


    <def-macro n="vauxiliar" npar="2">
      <choose>
        <when>
          <test>
            <in caseless="yes">
              <clip pos="2" side="tl" part="lem"/>
              <list n="vbambser"/>
            </in>
          </test>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="être"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="a_verb"/>
            <lit-tag v="vbser"/>
          </let>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <clip pos="1" side="tl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="avoir"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="a_verb"/>
            <lit-tag v="vbhaver"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal caseless="yes">
              <clip pos="2" side="tl" part="lem"/>
              <lit v="être"/>
            </equal>
          </test>
          <let>
            <var n="gen_pp"/>
            <lit-tag v="mf"/>
          </let>
          <let>
            <var n="nbr_pp"/>
            <lit-tag v="sp"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="gen_pp"/>
            <lit-tag v="m"/>
          </let>
          <let>
            <var n="nbr_pp"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="vauxiliar_pro" npar="3">
      <choose>
        <when>
          <test>
            <or>
              <in caseless="yes">
                <clip pos="3" side="tl" part="lem"/>
                <list n="vbambser"/>
              </in>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="tipoenc_pro"/>
                  <lit-tag v="ref.p3.mf.sp"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p3"/>
                </equal>
                <not>
                  <in caseless="yes">
                    <clip pos="3" side="sl" part="lem"/>
                    <list n="verbs_ref"/>
                  </in>
                </not>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p2"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
                <not>
                  <in caseless="yes">
                    <clip pos="3" side="sl" part="lem"/>
                    <list n="verbs_ref"/>
                  </in>
                </not>
              </and>
              <and>
                <equal>
                  <clip pos="1" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="pers"/>
                  <lit-tag v="p1"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <clip pos="2" side="sl" part="nbr"/>
                </equal>
                <not>
                  <in caseless="yes">
                    <clip pos="3" side="sl" part="lem"/>
                    <list n="verbs_ref"/>
                  </in>
                </not>
              </and>
            </or>
          </test>
          <let>
            <clip pos="2" side="tl" part="lem"/>
            <lit v="être"/>
          </let>
          <let>
            <clip pos="2" side="tl" part="a_verb"/>
            <lit-tag v="vbser"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="aux_ifi" npar="1">
      <choose>
        <when>
          <test>
            <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="haber"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_verb"/>
                <lit v="vbhaver"/>
              </equal>
            </and>
          </test>
          <let>
            <var n="auxiliar"/>
            <lit v="y avoir"/>
          </let>
          <let>
            <clip pos="1" side="tl" part="lem"/>
            <lit v="avoir"/>
          </let>
          <let>
            <var n="etiq_aux"/>
            <lit-tag v="vblex"/>
          </let>
        </when>
        <otherwise>
          <choose>
            <when>
              <test>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="temps"/>
                <lit-tag v="ifi"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <in caseless="yes">
                  <clip pos="1" side="tl" part="lem"/>
                  <list n="vbambser"/>
                </in>
              </test>
              <let>
                <var n="auxiliar"/>
                <lit v="être"/>
              </let>
              <let>
                <var n="etiq_aux"/>
                <lit-tag v="vbser"/>
              </let>
            </when>
            <otherwise>
              <let>
                <var n="auxiliar"/>
                <lit v="avoir"/>
              </let>
              <let>
                <var n="etiq_aux"/>
                <lit-tag v="vbhaver"/>
              </let>
            </otherwise>
          </choose>
        </otherwise>
      </choose>
    </def-macro>

  </section-def-macros>


  <section-rules>
<!-- *************************************** REGLES DE SN *************************************** -->

    <rule comment="REGLA: NOM (per a collocar la cua en les multiparaules amb g">
      <pattern>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="part_sing"/>
              </in>
            </test>
            <out>
              <chunk name="part" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: LOCATIUS">
      <pattern>
        <pattern-item n="loc"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="f_nploc">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <not>
                <equal>
                  <var n="art_np"/>
                  <lit v=""/>
                </equal>
              </not>
            </test>
            <out>
              <chunk name="nploc" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <var n="art_np"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <let>
              <var n="caseFirstWord"/>
              <lit v="aa"/>
            </let>
          </when>
          <otherwise>
            <out>
              <chunk name="nploc" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>


    <rule comment="REGLA: PREP DET LOCATIU">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="det"/>
        <pattern-item n="loc"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="nploc" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SPREP"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PREP LOCATIU">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="loc"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="f_nploc">
          <with-param pos="2"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <lit v="en"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="art_np"/>
                    <lit v=""/>
                  </equal>
                </test>
                <out>
                  <chunk name="nploc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SPREP"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                    </tags>
                    <lu>
                      <lit v="à"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="nploc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SPREP"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="art_np"/>
                    <lit v=""/>
                  </equal>
                </test>
                <out>
                  <chunk name="nploc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SPREP"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="nploc" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SPREP"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="art_np"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM">
      <pattern>
        <pattern-item n="ant"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="sg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: 2 ANTROPÒNIMS (px. maria lópez)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="ant"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="sg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: 3 ANTROPÒNIMS (px. maria lópez váquez)">
      <pattern>
        <pattern-item n="ant"/>
        <pattern-item n="ant"/>
        <pattern-item n="ant"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="ant" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="sg"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!--
    the next two rules can probably be combined with DET NOM below
    or even made into a macro and called from any DET NOM ... rule
-->
    <rule comment="REGLA: este NOM">
      <pattern>
        <pattern-item n="este"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <out>
          <chunk name="este_nom">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <lu>
              <lit v="-ci"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: aquele NOM">
      <pattern>
        <pattern-item n="aquele"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <out>
          <chunk name="aquele_nom">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="sl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <lu>
              <lit v="-là"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: DET NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: PREDET DET NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="predet_det_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>

              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_det"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET NUM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="2" side="tl" part="a_num"/>
                <lit-tag v="num.percent"/>
              </equal>
            </test>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><lit-tag v="m.sg"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="num.percent"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="det_num" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_num"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET NUM DE NOM DE NUM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="nom"/>
        <pattern-item n="de"/>
        <pattern-item n="num"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="4" side="sl" part="lem"/>
                <list n="meses"/>
              </in>
            </test>
            <out>
              <chunk name="det_num_nom_num" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="6" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
            <call-macro n="f_bcond">
              <with-param pos="5"/>
              <with-param pos="6"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="det_num_prep_nom_prep_num" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="5"/>
                <lu>
                  <clip pos="6" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET NUM DE NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="4" side="sl" part="lem"/>
                <list n="meses"/>
              </in>
            </test>
            <out>
              <chunk name="det_num_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="det_num_prep_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET ADJEC NUM DE NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="5"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="5" side="sl" part="lem"/>
                <list n="meses"/>
              </in>
            </test>
            <out>
              <chunk name="det_num_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
              <with-param pos="5"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="det_adj_num_prep_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM DE NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <list n="meses"/>
              </in>
            </test>
            <out>
              <chunk name="num_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="num_prep_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: num de cada num nom">
      <pattern>
        <pattern-item n="num_uno"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: num nom de cada num">
      <pattern>
        <pattern-item n="num_uno"/>
        <pattern-item n="nom"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: det num de cada num nom">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="6"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: det num nom de cada num">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: num de cada num adj">
      <pattern>
        <pattern-item n="num_uno"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: num adj de cada num">
      <pattern>
        <pattern-item n="num_uno"/>
        <pattern-item n="adjec"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: det num de cada num adj">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="6"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="6"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: det num adj de cada num">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="tl" part="lem"/>
                <list n="adj_colloc_abans"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="part_sing"/>
                  </in>
                </test>
                <out>
                  <chunk name="partnom_adj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_nom"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="nom_adj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_nom"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="part_sing"/>
                  </in>
                </test>
                <out>
                  <chunk name="partnom_adj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_nom"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="nom_adj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_nom"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="tl" part="lem"/>
                <list n="adj_colloc_abans"/>
              </in>
            </test>
            <out>
              <chunk name="nom_adj_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="3" side="tl" part="lem"/>
                    <list n="adj_colloc_abans"/>
                  </in>
                </test>
                <out>
                  <chunk name="nom_adj_adj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_nom"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="nom_adj_adj" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><var n="genero"/></tag>
                      <tag><var n="numero"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lemh"/>
                      <clip pos="1" side="tl" part="a_nom"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_adj"/>
                      <var n="genero"/>
                      <var n="numero"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET NOM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="tl" part="lem"/>
                <list n="adj_colloc_abans"/>
              </in>
            </test>
            <out>
              <chunk name="det_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="tl" part="lem"/>
                <list n="adj_colloc_abans"/>
              </in>
            </test>
            <out>
              <chunk name="num_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="num_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET NOM ADV ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="más"/>
              </equal>
            </test>
            <out>
              <chunk name="det_nom_det_adv_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/> <!-- mireia -->
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_nom_adv_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM NOM ADV ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ cnjcoo ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="det_gd3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="nom_adj_cnjcoo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ cnjcoo ADJ">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="adj_cnjcoo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET NOM ADJ cnjcoo ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_nom_adj_cnjcoo_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <list n="meses"/>
              </in>
            </test>
            <out>
              <chunk name="det_nom_adj" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="mois"/>
                  <lit-tag v="n.m.sp"/>
                </lu>
                <b/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN.DET"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET ADJ ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd4">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_adv_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET ADJ cnj ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd4">
          <with-param pos="5"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det_adj_cnjcoo_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADV ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_adv_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: NUM ADJ cnj ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb3">
          <with-param pos="5"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd3">
          <with-param pos="5"/>
          <with-param pos="4"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num_adj_cnjcoo_adj_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJ NOM">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="tl" part="lem"/>
                <list n="part_sing"/>
              </in>
            </test>
            <out>
              <chunk name="partadj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adj_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda)">
      <pattern>
        <pattern-item n="adjec"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: DET(quan no acompanya res o va amb desconeguda)">
      <pattern>
        <pattern-item n="det"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="det" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="DET"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: que relatiu (s'enxunca a part)">
      <pattern>
        <pattern-item n="querel"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="que" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="querel"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_rel"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


<!-- *************************************** REGLES DE SV *************************************** -->

    <rule comment="REGLA: adv VERB">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="2"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aux_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="sl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="sl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="sl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="sl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="sl" part="nbr"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp.m.sg"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <equal caseless="yes">
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="no"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="2" side="sl" part="pers"/>
                          <clip pos="2" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <lit-tag v="pp.m.sg"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="aux_adv_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <var n="auxiliar"/>
                          </get-case-from>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="2" side="sl" part="pers"/>
                          <clip pos="2" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <lit-tag v="pp.m.sg"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv VERB adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="2"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="3" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="2" side="sl" part="pers"/>
                          <clip pos="2" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <lit-tag v="pp.m.sg"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="2" side="sl" part="pers"/>
                          <clip pos="2" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <lit-tag v="pp.m.sg"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b pos="2"/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="3" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="1" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <lit v="ne"/>
                          </get-case-from>
                          <lit-tag v="adv"/>
                        </lu>
                      </chunk>
                      <b/>
                    </out>
                  </when>
                </choose>
                <out>
                  <chunk name="aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="sl" part="nbr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp.m.sg"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="3" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="3" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <choose>
                  <when>
                    <test>
                      <not>
                        <in caseless="yes">
                          <clip pos="3" side="tl" part="lem"/>
                          <list n="adv_neg"/>
                        </in>
                      </not>
                    </test>
                    <call-macro n="envia_pas">
                      <with-param pos="1"/>
                    </call-macro>
                  </when>
                </choose>
                <out>
                  <b pos="2"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="3" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: VERB">
      <pattern>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="1"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <list n="vbpron"/>
                  </in>
                </test>
                <let>
                  <var n="lema"/>
                  <lit v="pronaux_pp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema"/>
                  <lit v="aux_pp"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <lit v="être"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="mf"/>
                </let>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sp"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="sl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <var n="auxiliar"/>
                  <var n="etiq_aux"/>
                  <lit-tag v="pri"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <lit-tag v="pp"/>
                  <var n="gen_pp"/>
                  <var n="nbr_pp"/>
                  <!--
                  <lit-tag v="pp.m.sg"/>
                  -->
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <list n="vbpron"/>
                  </in>
                </test>
                <let>
                  <var n="lema"/>
                  <lit v="pronverb"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="lema"/>
                  <lit v="verb"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk namefrom="lema" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: acabar de inf -&gt; venir de inf">
      <pattern>
        <pattern-item n="acabar"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="venir_de_verb" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="venir"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: acabar de inf enc -&gt; venir de pro inf">
      <pattern>
        <pattern-item n="acabar"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="control_ref_aux">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="venir_de_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="venir"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="venir_de_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <lit v="venir"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: acabar de inf enc enc-&gt; venir de pro pro inf">
      <pattern>
        <pattern-item n="acabar"/>
        <pattern-item n="de"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="venir_de_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="venir"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: continuar ger -&gt; continuer à inf">
      <pattern>
        <pattern-item n="continuar"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="continuer_a_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <lit v="continuer"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <lit v="à"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: continuar ger enc -&gt; continuer à pro inf">
      <pattern>
        <pattern-item n="continuar"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="continuer_a_ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="continuer"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="à"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <lit-tag v="inf"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="continuer_a_pro_ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="continuer"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <lit v="à"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <lit-tag v="inf"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: continuar ger enc enc-&gt; continuer à pro pro inf">
      <pattern>
        <pattern-item n="continuar"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="continuer_a_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <lit v="continuer"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <lit v="à"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: estar ger -&gt; être en train de inf">
      <pattern>
        <pattern-item n="estar"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <let>
          <var n="lema"/>
          <lit v="etre_en_train_de_inf"/>
        </let>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk namefrom="lema" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <lit v="être"/>
              <lit-tag v="vbser"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <lit v="train"/>
              <lit-tag v="n.m.sg"/>
            </lu>
            <b/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: estar ger enc -&gt; être en train de pro inf">
      <pattern>
        <pattern-item n="estar"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="etre_en_train_de_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <lit v="train"/>
                  <lit-tag v="n.m.sg"/>
                </lu>
                <b/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <lit-tag v="inf"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="etre_en_train_de_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <lit v="train"/>
                  <lit-tag v="n.m.sg"/>
                </lu>
                <b/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <lit-tag v="inf"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: estar ger enc enc-&gt; être en train de pro pro inf">
      <pattern>
        <pattern-item n="estar"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="etre_in_train_de_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b/>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <lit v="train"/>
              <lit-tag v="n.m.sg"/>
            </lu>
            <b/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ir inf -&gt; aller inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_verb" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ir inf enc -&gt; aller pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="aller_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="aller_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ir a inf enc enc-&gt; aller a pro pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a inf -&gt; aller adv inf">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ir"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aller_adv_verb">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ir a inf adv-&gt; aller adv inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_adv_verb" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a inf adv-&gt; aller adv inf adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ir"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="5" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aller_adv_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aller_adv_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="4" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a inf enc -&gt; aller adv pro inf">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="control_ref_aux">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aller_adv_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aller_adv_pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aller_adv_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="aller_adv_pro_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a inf enc adv-&gt; aller adv pro inf adv">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="control_ref_aux">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="6" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <b pos="1"/>
                      <chunk name="aller_adv_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="6" side="tl" part="whole"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <clip pos="4" side="tl" part="temps"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                    <call-macro n="f_bcond">
                      <with-param pos="4"/>
                      <with-param pos="5"/>
                    </call-macro>
                    <call-macro n="f_bcond">
                      <with-param pos="5"/>
                      <with-param pos="6"/>
                    </call-macro>
                  </when>
                  <otherwise>
                    <out>
                      <b pos="1"/>
                      <chunk name="aller_adv_pro_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="6" side="tl" part="whole"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="5" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="5" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="5"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <clip pos="4" side="tl" part="temps"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <b pos="1"/>
                      <chunk name="aller_adv_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <clip pos="4" side="tl" part="temps"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <b/>
                      <chunk name="aller_adv_pro_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="5" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="5" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <clip pos="4" side="tl" part="temps"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
                <out>
                  <b pos="5"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="6" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <clip pos="6" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aller_adv_pro_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="aller_adv_pro_inf" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out>
              <b pos="5"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="6" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ir a inf enc adv -&gt; aller adv pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="aller_adv_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
              <with-param pos="5"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="aller_adv_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
              <with-param pos="5"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a inf enc enc-&gt; aller adv pro pro inf">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aller_adv_pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_pro_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ir a inf enc enc adv-&gt; aller adv pro pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_adv_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ir a inf enc enc enc-&gt; aller adv pro pro inf enc">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="7" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aller_adv_pro_pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="6" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="6"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aller_adv_pro_pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="5"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="6" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <clip pos="6" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_pro_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="5"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="6" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ger -&gt; en ger">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv ger">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: volver a inf - inf + à nouveau">
      <pattern>
        <pattern-item n="volver"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <out>
              <chunk name="aux_pp_adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <var n="auxiliar"/>
                  <var n="etiq_aux"/>
                  <lit-tag v="pri"/>
                  <clip pos="1" side="sl" part="pers"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="pp.m.sg"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="à nouveau"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="verb_adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="à nouveau"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: volver a inf enc - pro inf à nouveau">
      <pattern>
        <pattern-item n="volver"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="4"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
          </when>
        </choose>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="auxiliar"/>
                    <lit v=""/>
                  </equal>
                </test>
                <out>
                  <chunk name="verb_adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="à nouveau"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="aux_pp_adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="sl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp.m.sg"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="à nouveau"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="auxiliar"/>
                    <lit v=""/>
                  </equal>
                </test>
                <out>
                  <chunk name="pro_verb_adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="1" side="tl" part="temps"/>
                      <clip pos="1" side="tl" part="pers"/>
                      <clip pos="1" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="à nouveau"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp_adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="1" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="1" side="sl" part="pers"/>
                      <clip pos="1" side="sl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <lit-tag v="pp.m.sg"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <lit v="à nouveau"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: volver a inf enc enc - pro pro inf à nouveau">
      <pattern>
        <pattern-item n="volver"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <out>
              <chunk name="pro_pro_aux_pp_adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <var n="auxiliar"/>
                  <var n="etiq_aux"/>
                  <lit-tag v="pri"/>
                  <clip pos="1" side="sl" part="pers"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="pp.m.sg"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <lit v="à nouveau"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_pro_verb_adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <lit v="à nouveau"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: volver enc a inf - pro inf à nouveau">
      <pattern>
        <pattern-item n="volver"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_verb_adv" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="à nouveau"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: volver enc enc a inf - pro inf à nouveau">
      <pattern>
        <pattern-item n="volver"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_verb_adv" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="5" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <lit v="à nouveau"/>
              <lit-tag v="adv"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="prnpro">
      <!--per quan va seguit d'un verb desconegut-->
      <pattern>
        <pattern-item n="prnpro"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="prnpro"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="tipoenc_pro"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="1" side="tl" part="tipoenc_pro"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="control_ref">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="2"/>
            </call-macro>
            <choose>
              <!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="2" side="tl" part="lem"/>
                    <lit v="être"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="mf"/>
                </let>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sp"/>
                </let>
              </when>
            </choose>

            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="sl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <var n="gen_pp"/>
                      <var n="nbr_pp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_aux_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="sl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <var n="gen_pp"/>
                      <var n="nbr_pp"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="verb" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <clip pos="2" side="tl" part="lemh"/>
                      </get-case-from>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="1"/>
                  <with-param pos="2"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="2"/>
                  <with-param pos="3"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_verb" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="1" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="adv prnpro verbpers">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="control_ref">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="infps">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <var n="auxiliar"/>
                          </get-case-from>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <equal caseless="yes">
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="no"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b/>
                    </out>
                    <choose>
                      <when>
                        <test>
                          <equal>
                            <var n="treu_ref"/>
                            <lit v="treu"/>
                          </equal>
                        </test>
                        <out>
                          <chunk name="aux_adv_pp">
                            <tags>
                              <tag>
                                <lit-tag v="SV"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="a_verb"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="temps"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="pers"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="nbr"/>
                              </tag>
                            </tags>
                            <lu>
                              <get-case-from pos="1">
                                <var n="auxiliar"/>
                              </get-case-from>
                              <var n="etiq_aux"/>
                              <lit-tag v="pri"/>
                              <clip pos="3" side="tl" part="pers"/>
                              <clip pos="3" side="tl" part="nbr"/>
                            </lu>
                            <b pos="1"/>
                            <lu>
                              <lit v="pas"/>
                              <lit-tag v="adv"/>
                            </lu>
                            <b pos="2"/>
                            <lu>
                              <clip pos="3" side="tl" part="lemh"/>
                              <clip pos="3" side="tl" part="a_verb"/>
                              <lit-tag v="pp"/>
                              <var n="gen_pp"/>
                              <var n="nbr_pp"/>
                              <clip pos="3" side="tl" part="lemq"/>
                            </lu>
                          </chunk>
                        </out>
                      </when>
                      <otherwise>
                        <out>
                          <chunk name="pro_aux_adv_pp">
                            <tags>
                              <tag>
                                <lit-tag v="SV"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="a_verb"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="temps"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="pers"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="nbr"/>
                              </tag>
                            </tags>
                            <lu>
                              <clip pos="2" side="tl" part="lem"/>
                              <lit-tag v="prn.pro"/>
                              <clip pos="2" side="tl" part="tipoenc_pro"/>
                            </lu>
                            <b pos="1"/>
                            <lu>
                              <var n="auxiliar"/>
                              <var n="etiq_aux"/>
                              <lit-tag v="pri"/>
                              <clip pos="3" side="tl" part="pers"/>
                              <clip pos="3" side="tl" part="nbr"/>
                            </lu>
                            <b/>
                            <lu>
                              <lit v="pas"/>
                              <lit-tag v="adv"/>
                            </lu>
                            <b pos="2"/>
                            <lu>
                              <clip pos="3" side="tl" part="lemh"/>
                              <clip pos="3" side="tl" part="a_verb"/>
                              <lit-tag v="pp"/>
                              <var n="gen_pp"/>
                              <var n="nbr_pp"/>
                              <clip pos="3" side="tl" part="lemq"/>
                            </lu>
                          </chunk>
                        </out>
                      </otherwise>
                    </choose>
                  </when>
                  <otherwise>
                    <choose>
                      <when>
                        <test>
                          <equal>
                            <var n="treu_ref"/>
                            <lit v="treu"/>
                          </equal>
                        </test>
                        <out>
                          <chunk name="aux_adv_pp" case="caseFirstWord">
                            <tags>
                              <tag>
                                <lit-tag v="SV"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="a_verb"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="temps"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="pers"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="nbr"/>
                              </tag>
                            </tags>
                            <lu>
                              <var n="auxiliar"/>
                              <var n="etiq_aux"/>
                              <lit-tag v="pri"/>
                              <clip pos="3" side="tl" part="pers"/>
                              <clip pos="3" side="tl" part="nbr"/>
                            </lu>
                            <b pos="1"/>
                            <lu>
                              <get-case-from pos="2">
                                <clip pos="1" side="tl" part="lem"/>
                              </get-case-from>
                              <clip pos="1" side="tl" part="a_adv"/>
                            </lu>
                            <b pos="2"/>
                            <lu>
                              <clip pos="3" side="tl" part="lemh"/>
                              <clip pos="3" side="tl" part="a_verb"/>
                              <lit-tag v="pp"/>
                              <var n="gen_pp"/>
                              <var n="nbr_pp"/>
                              <clip pos="3" side="tl" part="lemq"/>
                            </lu>
                          </chunk>
                        </out>
                      </when>
                      <otherwise>
                        <choose>
                          <when>
                            <test>
                              <equal>
                                <var n="treu_ref"/>
                                <lit v="treu"/>
                              </equal>
                            </test>
                            <out>
                              <chunk name="aux_adv_pp" case="caseFirstWord">
                                <tags>
                                  <tag>
                                    <lit-tag v="SV"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="a_verb"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="temps"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="pers"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="nbr"/>
                                  </tag>
                                </tags>
                                <lu>
                                  <get-case-from pos="1">
                                    <var n="auxiliar"/>
                                  </get-case-from>
                                  <var n="etiq_aux"/>
                                  <lit-tag v="pri"/>
                                  <clip pos="3" side="tl" part="pers"/>
                                  <clip pos="3" side="tl" part="nbr"/>
                                </lu>
                                <b pos="1"/>
                                <lu>
                                  <get-case-from pos="2">
                                    <clip pos="1" side="tl" part="lem"/>
                                  </get-case-from>
                                  <clip pos="1" side="tl" part="a_adv"/>
                                </lu>
                                <b pos="2"/>
                                <lu>
                                  <clip pos="3" side="tl" part="lemh"/>
                                  <clip pos="3" side="tl" part="a_verb"/>
                                  <lit-tag v="pp"/>
                                  <var n="gen_pp"/>
                                  <var n="nbr_pp"/>
                                  <clip pos="3" side="tl" part="lemq"/>
                                </lu>
                              </chunk>
                            </out>
                          </when>
                          <otherwise>
                            <out>
                              <chunk name="pro_aux_adv_pp" case="caseFirstWord">
                                <tags>
                                  <tag>
                                    <lit-tag v="SV"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="a_verb"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="temps"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="pers"/>
                                  </tag>
                                  <tag>
                                    <clip pos="3" side="tl" part="nbr"/>
                                  </tag>
                                </tags>
                                <lu>
                                  <get-case-from pos="1">
                                    <clip pos="2" side="tl" part="lem"/>
                                  </get-case-from>
                                  <lit-tag v="prn.pro"/>
                                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                                </lu>
                                <b pos="1"/>
                                <lu>
                                  <var n="auxiliar"/>
                                  <var n="etiq_aux"/>
                                  <lit-tag v="pri"/>
                                  <clip pos="3" side="tl" part="pers"/>
                                  <clip pos="3" side="tl" part="nbr"/>
                                </lu>
                                <b pos="1"/>
                                <lu>
                                  <get-case-from pos="2">
                                    <clip pos="1" side="tl" part="lem"/>
                                  </get-case-from>
                                  <clip pos="1" side="tl" part="a_adv"/>
                                </lu>
                                <b pos="2"/>
                                <lu>
                                  <clip pos="3" side="tl" part="lemh"/>
                                  <clip pos="3" side="tl" part="a_verb"/>
                                  <lit-tag v="pp"/>
                                  <var n="gen_pp"/>
                                  <var n="nbr_pp"/>
                                  <clip pos="3" side="tl" part="lemq"/>
                                </lu>
                              </chunk>
                            </out>
                          </otherwise>
                        </choose>
                      </otherwise>
                    </choose>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <call-macro n="fts">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b pos="2"/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                    <call-macro n="f_bcond">
                      <with-param pos="2"/>
                      <with-param pos="3"/>
                    </call-macro>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="adv prnpro verbpers adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="control_ref">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="4" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                    </out>
                    <choose>
                      <when>
                        <test>
                          <equal>
                            <var n="treu_ref"/>
                            <lit v="treu"/>
                          </equal>
                        </test>
                        <out>
                          <chunk name="aux_adv_pp">
                            <tags>
                              <tag>
                                <lit-tag v="SV"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="a_verb"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="temps"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="pers"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="nbr"/>
                              </tag>
                            </tags>
                            <lu>
                              <var n="auxiliar"/>
                              <var n="etiq_aux"/>
                              <lit-tag v="pri"/>
                              <clip pos="3" side="sl" part="pers"/>
                              <clip pos="3" side="sl" part="nbr"/>
                            </lu>
                            <b pos="2"/>
                            <lu>
                              <clip pos="4" side="tl" part="lem"/>
                              <clip pos="4" side="tl" part="a_adv"/>
                            </lu>
                            <b pos="3"/>
                            <lu>
                              <clip pos="3" side="tl" part="lemh"/>
                              <clip pos="3" side="tl" part="a_verb"/>
                              <lit-tag v="pp"/>
                              <var n="gen_pp"/>
                              <var n="nbr_pp"/>
                              <clip pos="3" side="tl" part="lemq"/>
                            </lu>
                          </chunk>
                        </out>
                      </when>
                      <otherwise>
                        <out>
                          <chunk name="pro_aux_adv_pp">
                            <tags>
                              <tag>
                                <lit-tag v="SV"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="a_verb"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="temps"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="pers"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="tl" part="nbr"/>
                              </tag>
                            </tags>
                            <lu>
                              <clip pos="2" side="tl" part="lem"/>
                              <lit-tag v="prn.pro"/>
                              <clip pos="2" side="tl" part="tipoenc_pro"/>
                            </lu>
                            <b/>
                            <lu>
                              <var n="auxiliar"/>
                              <var n="etiq_aux"/>
                              <lit-tag v="pri"/>
                              <clip pos="3" side="sl" part="pers"/>
                              <clip pos="3" side="sl" part="nbr"/>
                            </lu>
                            <b pos="2"/>
                            <lu>
                              <clip pos="4" side="tl" part="lem"/>
                              <clip pos="4" side="tl" part="a_adv"/>
                            </lu>
                            <b pos="3"/>
                            <lu>
                              <clip pos="3" side="tl" part="lemh"/>
                              <clip pos="3" side="tl" part="a_verb"/>
                              <lit-tag v="pp"/>
                              <var n="gen_pp"/>
                              <var n="nbr_pp"/>
                              <clip pos="3" side="tl" part="lemq"/>
                            </lu>
                          </chunk>
                        </out>
                      </otherwise>
                    </choose>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                    </out>
                    <choose>
                      <when>
                        <test>
                          <equal>
                            <var n="treu_ref"/>
                            <lit v="treu"/>
                          </equal>
                        </test>
                        <out>
                          <chunk name="aux_adv_pp">
                            <tags>
                              <tag>
                                <lit-tag v="SV"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="a_verb"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="temps"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="pers"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="nbr"/>
                              </tag>
                            </tags>
                            <lu>
                              <var n="auxiliar"/>
                              <var n="etiq_aux"/>
                              <lit-tag v="pri"/>
                              <clip pos="3" side="sl" part="pers"/>
                              <clip pos="3" side="sl" part="nbr"/>
                            </lu>
                            <b pos="2"/>
                            <lu>
                              <lit v="pas"/>
                              <lit-tag v="adv"/>
                            </lu>
                            <b/>
                            <lu>
                              <clip pos="3" side="tl" part="lemh"/>
                              <clip pos="3" side="tl" part="a_verb"/>
                              <lit-tag v="pp"/>
                              <var n="gen_pp"/>
                              <var n="nbr_pp"/>
                              <clip pos="3" side="tl" part="lemq"/>
                            </lu>
                          </chunk>
                        </out>
                      </when>
                      <otherwise>
                        <out>
                          <chunk name="pro_aux_adv_pp">
                            <tags>
                              <tag>
                                <lit-tag v="SV"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="a_verb"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="temps"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="pers"/>
                              </tag>
                              <tag>
                                <clip pos="3" side="sl" part="nbr"/>
                              </tag>
                            </tags>
                            <lu>
                              <clip pos="2" side="tl" part="lem"/>
                              <lit-tag v="prn.pro"/>
                              <clip pos="2" side="tl" part="tipoenc_pro"/>
                            </lu>
                            <b pos="2"/>
                            <lu>
                              <var n="auxiliar"/>
                              <var n="etiq_aux"/>
                              <lit-tag v="pri"/>
                              <clip pos="3" side="sl" part="pers"/>
                              <clip pos="3" side="sl" part="nbr"/>
                            </lu>
                            <b/>
                            <lu>
                              <lit v="pas"/>
                              <lit-tag v="adv"/>
                            </lu>
                            <b/>
                            <lu>
                              <clip pos="3" side="tl" part="lemh"/>
                              <clip pos="3" side="tl" part="a_verb"/>
                              <lit-tag v="pp"/>
                              <var n="gen_pp"/>
                              <var n="nbr_pp"/>
                              <clip pos="3" side="tl" part="lemq"/>
                            </lu>
                          </chunk>
                        </out>
                      </otherwise>
                    </choose>
                    <out>
                      <b pos="3"/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="4" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="4" side="tl" part="lem"/>
                          <clip pos="4" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="1" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <lit v="ne"/>
                          </get-case-from>
                          <lit-tag v="adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                    </out>
                  </when>
                </choose>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="aux_adv_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="3" side="sl" part="pers"/>
                          <clip pos="3" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b pos="3"/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="4" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="4" side="tl" part="lem"/>
                          <clip pos="4" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_aux_adv_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="3" side="sl" part="pers"/>
                          <clip pos="3" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b pos="3"/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="4" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="4" side="tl" part="lem"/>
                          <clip pos="4" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <call-macro n="fts">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b pos="2"/>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b/>
                    </out>
                  </otherwise>
                </choose>
                <out>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="4" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                    <call-macro n="f_bcond">
                      <with-param pos="2"/>
                      <with-param pos="3"/>
                    </call-macro>
                    <call-macro n="f_bcond">
                      <with-param pos="3"/>
                      <with-param pos="4"/>
                    </call-macro>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_verb">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
                <choose>
                  <when>
                    <test>
                      <not>
                        <in caseless="yes">
                          <clip pos="4" side="tl" part="lem"/>
                          <list n="adv_neg"/>
                        </in>
                      </not>
                    </test>
                    <call-macro n="envia_pas">
                      <with-param pos="1"/>
                    </call-macro>
                  </when>
                </choose>
                <out>
                  <b pos="3"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="4" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="prnpro prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="fts">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="sl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="1" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <var n="auxiliar"/>
                  <var n="etiq_aux"/>
                  <lit-tag v="pri"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="pp"/>
                  <var n="gen_pp"/>
                  <var n="nbr_pp"/>
                  <!--
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="2" side="sl" part="nbr"/>
                  -->
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="fts">
              <with-param pos="3"/>
            </call-macro>
            <out>
              <chunk name="pro_pro_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv prnpro prnpro verbpers">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="fts">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="4"/>
            </call-macro>
            <choose>
              <!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="pro_pro_aux_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <var n="gen_pp"/>
                      <var n="nbr_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <equal caseless="yes">
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="no"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="pro_pro_aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="4" side="tl" part="pers"/>
                          <clip pos="4" side="tl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <clip pos="2" side="tl" part="lem"/>
                          </get-case-from>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="4" side="tl" part="pers"/>
                          <clip pos="4" side="tl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <call-macro n="fts">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv prnpro prnpro verbpers adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="fts">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="temps"/>
                  <lit-tag v="ifi"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="temps"/>
                  <lit-tag v="pmp"/>
                </equal>
              </or>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="4"/>
            </call-macro>
            <choose>
              <!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="5" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="pro_pro_aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="4" side="sl" part="pers"/>
                          <clip pos="4" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="5" side="tl" part="lem"/>
                          <clip pos="5" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="4"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="pro_pro_aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="sl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="sl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="sl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="sl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="4" side="sl" part="pers"/>
                          <clip pos="4" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b pos="4"/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="5" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="5" side="tl" part="lem"/>
                          <clip pos="5" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="1" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <lit v="ne"/>
                          </get-case-from>
                          <lit-tag v="adv"/>
                        </lu>
                      </chunk>
                      <b/>
                    </out>
                    <let>
                      <var n="caseFirstWord"/>
                      <lit v="aa"/>
                    </let>
                  </when>
                </choose>
                <out>
                  <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="4" side="sl" part="pers"/>
                      <clip pos="4" side="sl" part="nbr"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <var n="gen_pp"/>
                      <var n="nbr_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="5" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <call-macro n="fts">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="5" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <choose>
                  <when>
                    <test>
                      <not>
                        <in caseless="yes">
                          <clip pos="5" side="tl" part="lem"/>
                          <list n="adv_neg"/>
                        </in>
                      </not>
                    </test>
                    <call-macro n="envia_pas">
                      <with-param pos="1"/>
                    </call-macro>
                  </when>
                </choose>
                <out>
                  <b pos="4"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="5" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: ger">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: INF">
      <pattern>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
              <!--com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="inf enc">
      <pattern>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="control_ref">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                  <!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                  <!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <lit-tag v="prn.pro"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv inf enc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="control_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="adv inf enc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="control_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
                      <!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="4" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="inf prnenc prnenc">
      <pattern>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
              <!--com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv inf prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                  <!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                  <!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv inf prnenc prnenc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                  <!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                  <!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="5" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: no INF nada -&gt; ne rien INF">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="inf"/>
        <pattern-item n="nada"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_prn"/>
              <clip pos="3" side="tl" part="tipus_prn"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="inf">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
              <!--com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="no inf enc nada">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="nada"/>
      </pattern>
      <action>
        <call-macro n="control_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_prn"/>
              <clip pos="4" side="tl" part="tipus_prn"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="2"/>
        </out>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="inf prnenc prnenc">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="nada"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="5" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="5" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="5" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_prn"/>
              <clip pos="5" side="tl" part="tipus_prn"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="pro_pro_inf">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="ger prnenc">
      <pattern>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="control_ref">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_ger" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="adv ger prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="control_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ger">
                    <tags>
                      <tag>
                        <lit-tag v="ger"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="en"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_ger">
                    <tags>
                      <tag>
                        <lit-tag v="ger"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="en"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="ger">
                    <tags>
                      <tag>
                        <lit-tag v="ger"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="en"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_ger">
                    <tags>
                      <tag>
                        <lit-tag v="ger"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="en"/>
                      <lit-tag v="pr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="ger prnenc prnenc">
      <pattern>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv ger prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="imp prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="control_ref">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="imp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="1" side="tl" part="lemh"/>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps"/>
                    <clip pos="1" side="tl" part="pers"/>
                    <clip pos="1" side="tl" part="nbr"/>
                    <clip pos="1" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="imp_enc" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="1" side="tl" part="lemh"/>
                    <clip pos="1" side="tl" part="a_verb"/>
                    <clip pos="1" side="tl" part="temps"/>
                    <clip pos="1" side="tl" part="pers"/>
                    <clip pos="1" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="2" side="tl" part="whole"/>
                    <clip pos="1" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv imp prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="control_ref">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <b pos="1"/>
                  <chunk name="imp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="2" side="tl" part="lemh"/>
                        <clip pos="2" side="tl" part="a_verb"/>
                        <clip pos="2" side="tl" part="temps"/>
                        <clip pos="2" side="tl" part="pers"/>
                        <clip pos="2" side="tl" part="nbr"/>
                        <clip pos="2" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <b pos="1"/>
                  <chunk name="imp_enc">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="2" side="tl" part="lemh"/>
                        <clip pos="2" side="tl" part="a_verb"/>
                        <clip pos="2" side="tl" part="temps"/>
                        <clip pos="2" side="tl" part="pers"/>
                        <clip pos="2" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="whole"/>
                        <clip pos="2" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <b pos="1"/>
                  <chunk name="imp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="2" side="tl" part="lemh"/>
                        <clip pos="2" side="tl" part="a_verb"/>
                        <clip pos="2" side="tl" part="temps"/>
                        <clip pos="2" side="tl" part="pers"/>
                        <clip pos="2" side="tl" part="nbr"/>
                        <clip pos="2" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <b pos="1"/>
                  <chunk name="imp_enc">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <mlu>
                      <lu>
                        <clip pos="2" side="tl" part="lemh"/>
                        <clip pos="2" side="tl" part="a_verb"/>
                        <clip pos="2" side="tl" part="temps"/>
                        <clip pos="2" side="tl" part="pers"/>
                        <clip pos="2" side="tl" part="nbr"/>
                      </lu>
                      <lu>
                        <clip pos="3" side="tl" part="whole"/>
                        <clip pos="2" side="tl" part="lemq"/>
                      </lu>
                    </mlu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="adv imp prnenc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="4" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="imp prnenc prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="imp_enc_enc" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <!--         gema
              <lu>
                <clip pos="2" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="2" side="tl" part="tipoenc_pro"/>
              </lu>
              -->
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv imp prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <!--    gema
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  -->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <!--gema
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  -->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv imp prnenc prnenc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <!-- gema
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  -->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <!--  gema
                  <lu>
                    <clip pos="3" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="3" side="tl" part="tipoenc_pro"/>
                  </lu>
                  -->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="5" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="aux + pp">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="haver_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <var n="gen_pp"/>
              <var n="nbr_pp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv aux + pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="haver_adv_pp">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <lit-tag v="m.sg"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aux_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <lit-tag v="m.sg"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="haver_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <lit-tag v="m.sg"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="aux + pp adv">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="haver_aux_adv_pp" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <lit-tag v="m.sg"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="prnpro auxpers + pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_nb2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="tl" part="lem"/>
                <lit v="être"/>
              </equal>
            </test>
            <let>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="nbr"/>
            </let>
          </when>
        </choose>
        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="haver" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="adj">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
              <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_haver" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="2"/>
              <chunk name="adj">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_adj"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv prnpro auxpers + pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="vauxiliar_pro">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="haver_adv_pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="3"/>
                  <with-param pos="4"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_haver_adv_pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="3" side="tl" part="temps"/></tag>
                      <tag><clip pos="3" side="tl" part="pers"/></tag>
                      <tag><clip pos="3" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="haver_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_haver_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="whole"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="pro_haver_adv_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="whole"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_haver_adv_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="whole"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <clip pos="3" side="tl" part="lemh"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="pers"/>
                          <clip pos="3" side="tl" part="nbr"/>
                          <clip pos="3" side="tl" part="lemq"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="prnpro auxpers + pp adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv_preadv"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_nb2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="haver_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lemh"/>
                  </get-case-from>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_haver_adv_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="prnpro prnpro auxpers pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="pro_pro_haver_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv prnpro prnpro auxpers pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar_pro">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="det_nb2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_haver_pp">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="4" side="tl" part="temps"/></tag>
                  <tag><clip pos="4" side="tl" part="pers"/></tag>
                  <tag><clip pos="4" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_haver_adv_pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_haver_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="4" side="tl" part="temps"/></tag>
                      <tag><clip pos="4" side="tl" part="pers"/></tag>
                      <tag><clip pos="4" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="prnpro prnpro auxpers pp adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv_preadv"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="pro_pro_haver_adv_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adv"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="auxinf-enc pp">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="det_nb2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <!-- com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pro_auxinf_pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <!-- com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv auxinf-enc pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="auxinf_adv_pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                      <!-- com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_auxinf_adv_pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                      <!-- com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="auxinf_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <lit-tag v="sg"/>
                          </tag>
                          <!-- com a sn és sg ("cantar és important") -->
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_auxinf_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <lit-tag v="sg"/>
                          </tag>
                          <!-- com a sn és sg ("cantar és important") -->
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="auxinf_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <lit-tag v="sg"/>
                          </tag>
                          <!-- com a sn és sg ("cantar és important") -->
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_auxinf_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <lit-tag v="sg"/>
                          </tag>
                          <!-- com a sn és sg ("cantar és important") -->
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_pp"/>
                          <clip pos="4" side="tl" part="gen"/>
                          <clip pos="4" side="tl" part="nbr"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="auxinf-enc-enc pp">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="pro_auxinf_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><lit-tag v="sg"/></tag>
              <!-- com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="adv auxinf-enc-enc pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="det_nb2">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_auxinf_adv_pp">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><lit-tag v="sg"/></tag>
                  <!-- com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_auxinf_adv_pp">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                      <!-- com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_auxinf_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><lit-tag v="sg"/></tag>
                      <!-- com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="aux + irpp a inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="aux_irpp_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <lit-tag v="m.sg"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: aux ir a inf enc -&gt; aux aller pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="5"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="aux_irpp_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
              <with-param pos="4"/>
            </call-macro>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
              <with-param pos="5"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="aux_irpp_pro_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="1" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: aux ir a inf enc enc -&gt; aux aller pro pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <out>
          <chunk name="aux_irpp_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="6" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: aux adv ir a inf -&gt; aller adv inf">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aux_adv_irpp_verb">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="aux_adv_irpp_verb" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: aux irpp a inf adv-&gt; aux aller adv inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="aux_irpp_adv_verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv aux irpp a inf adv-&gt; aux aller adv inf adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="6" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aux_adv_irpp_verb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="6" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aux_adv_irpp_verb">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="5"/>
                  <chunk name="adv">
                    <tags>
                      <tag><clip pos="6" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <clip pos="6" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="aux_adv_irpp_verb" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="6" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv aux irpp a inf enc -&gt; aux aller adv pro inf">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="aux"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="6"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
            </out>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aux_irpp_adv_inf">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="aux_irpp_adv_pro_inf">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aux_irpp_adv_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="aux_irpp_adv_pro_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>

        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv aux irpp a inf enc adv-&gt; aux aller adv pro inf adv">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="6"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="7" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="aux_irpp_adv_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="7" side="tl" part="whole"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="gen"/>
                          <clip pos="3" side="tl" part="nbr"/>
                        </lu>
                        <b pos="4"/>
                        <lu>
                          <clip pos="5" side="tl" part="lemh"/>
                          <clip pos="5" side="tl" part="a_verb"/>
                          <clip pos="5" side="tl" part="temps"/>
                          <clip pos="5" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                    <call-macro n="f_bcond">
                      <with-param pos="5"/>
                      <with-param pos="6"/>
                    </call-macro>
                    <call-macro n="f_bcond">
                      <with-param pos="6"/>
                      <with-param pos="7"/>
                    </call-macro>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="aux_irpp_adv_pro_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="7" side="tl" part="whole"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="gen"/>
                          <clip pos="3" side="tl" part="nbr"/>
                        </lu>
                        <b pos="4"/>
                        <lu>
                          <clip pos="6" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="6" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="6"/>
                        <lu>
                          <clip pos="5" side="tl" part="lemh"/>
                          <clip pos="5" side="tl" part="a_verb"/>
                          <clip pos="5" side="tl" part="temps"/>
                          <clip pos="5" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <var n="treu_ref"/>
                        <lit v="treu"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="aller_adv_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="gen"/>
                          <clip pos="3" side="tl" part="nbr"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="5" side="tl" part="lemh"/>
                          <clip pos="5" side="tl" part="a_verb"/>
                          <clip pos="5" side="tl" part="temps"/>
                          <clip pos="5" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                    <call-macro n="f_bcond">
                      <with-param pos="4"/>
                      <with-param pos="5"/>
                    </call-macro>
                    <call-macro n="f_bcond">
                      <with-param pos="5"/>
                      <with-param pos="6"/>
                    </call-macro>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="aller_adv_pro_inf">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="3" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <clip pos="2" side="tl" part="temps"/>
                          <clip pos="2" side="tl" part="pers"/>
                          <clip pos="2" side="tl" part="nbr"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_verb"/>
                          <clip pos="3" side="tl" part="temps"/>
                          <clip pos="3" side="tl" part="gen"/>
                          <clip pos="3" side="tl" part="nbr"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="6" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="6" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="4"/>
                        <lu>
                          <clip pos="5" side="tl" part="lemh"/>
                          <clip pos="5" side="tl" part="a_verb"/>
                          <clip pos="5" side="tl" part="temps"/>
                          <clip pos="5" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
                <out>
                  <b pos="6"/>
                  <chunk name="adv">
                    <tags>
                      <tag><clip pos="7" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lem"/>
                      <clip pos="7" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <var n="treu_ref"/>
                    <lit v="treu"/>
                  </equal>
                </test>
                <out>
                  <chunk name="aller_adv_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="aller_adv_pro_inf" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <var n="genero"/>
                      <var n="numero"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
            <out>
              <b pos="6"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="7" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <clip pos="7" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: aux ir a inf enc adv -&gt; aux aller adv pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>

      <action>
        <call-macro n="control_ref_aux">
          <with-param pos="5"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal>
                <var n="treu_ref"/>
                <lit v="treu"/>
              </equal>
            </test>
            <out>
              <chunk name="aux_adv_irpp_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="6" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
              <with-param pos="5"/>
            </call-macro>
            <call-macro n="f_bcond">
              <with-param pos="5"/>
              <with-param pos="6"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="aux_adv_irpp_pro_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="2" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="1" side="tl" part="temps"/></tag>
                  <tag><clip pos="1" side="tl" part="pers"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="6" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
          <with-param pos="6"/>
        </call-macro>

        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
        <let>
          <var n="treu_ref"/>
          <lit v=""/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv aux irpp a inf enc enc-&gt; aux aller adv pro pro inf">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aux_irpp_adv_pro_pro_inf">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="7" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="aux_irpp_adv_pro_pro_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="7" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: aux irpp a inf enc enc adv-&gt; aux aller adv pro pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="aux_irpp_adv_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="6" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="REGLA: adv aux irpp a inf enc enc adv-&gt; aux aller adv pro pro inf adv">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="aux"/>
        <pattern-item n="adv"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>

      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="8" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aux_irpp_adv_pro_pro_inf">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="8" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="7" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="7" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="7"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aux_irpp_adv_pro_pro_inf">
                    <tags>
                      <tag><lit-tag v="SV"/></tag>
                      <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                      <tag><clip pos="2" side="tl" part="temps"/></tag>
                      <tag><clip pos="2" side="tl" part="pers"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="pers"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="7" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="7" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="7"/>
                  <chunk name="adv">
                    <tags>
                      <tag><clip pos="8" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <clip pos="8" side="tl" part="lem"/>
                      <clip pos="8" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="aux_irpp_adv_pro_pro_inf" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                  <tag><clip pos="3" side="tl" part="a_verb"/></tag>
                  <tag><clip pos="2" side="tl" part="temps"/></tag>
                  <tag><clip pos="2" side="tl" part="pers"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="7" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="7"/>
              <chunk name="adv">
                <tags>
                  <tag><clip pos="8" side="tl" part="a_adv"/></tag>
                </tags>
                <lu>
                  <clip pos="8" side="tl" part="lem"/>
                  <clip pos="8" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>
    <!-- ************************************ ALTRES ************************************ -->
    <rule comment="ADV">
      <pattern>
        <pattern-item n="adv_preadv"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="1" side="tl" part="lem"/>
                    <lit v="ne"/>
                  </equal>
                </test>
                <out>
                  <chunk name="no" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv_neg" case="caseFirstWord">
                    <tags>
                      <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                      <tag><clip pos="1" side="tl" part="neg"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag><clip pos="1" side="tl" part="a_adv"/></tag>
                  <tag><clip pos="1" side="tl" part="neg"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRN personal que pot ser subjecte">
      <pattern>
        <pattern-item n="prnperssubj"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prnperssubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="4"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="5"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRN no personal que pot ser subjecte">
      <pattern>
        <pattern-item n="prnsubj"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prnsubj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="a_prn"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRNITG">
      <pattern>
        <pattern-item n="prnitg"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="prnitg" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PRNREL">
      <pattern>
        <pattern-item n="rel"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="puntuación PREP + PRNREL">
      <pattern>
        <pattern-item n="puntuac"/>
        <pattern-item n="prep"/>
        <pattern-item n="rel"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>

        <let>
          <var n="lema"/>
          <clip pos="2" side="tl" part="lem"/>
        </let>
        <out>
          <chunk name="punt">
            <tags>
              <tag><lit-tag v="SENT"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk namefrom="lema" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="prnrel">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><clip pos="3" side="tl" part="tipus_prn"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_prn"/>
              <clip pos="3" side="tl" part="tipus_prn"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PREP + PRNREL">
      <pattern>
        <pattern-item n="prep"/>
        <pattern-item n="rel"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="gen"/>
                <lit-tag v="nt"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="de"/>
                  </equal>
                </test>
                <let>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit v="celui dont"/>
                </let>
                <out>
                  <chunk name="prn_rel" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <let>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit v="celui que"/>
                </let>
                <out>
                  <chunk name="prep_prn_rel" case="caseFirstWord">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                      <tag><clip pos="2" side="tl" part="gen"/></tag>
                      <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <and>
                    <equal>
                      <clip pos="2" side="sl" part="lem"/>
                      <lit v="el que"/>
                    </equal>
                    <equal>
                      <clip pos="2" side="sl" part="tipus_prn"/>
                      <lit-tag v="rel.an"/>
                    </equal>
                  </and>
                </test>
                <let>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit v="lequel"/>
                </let>
                <choose>
                  <when>
                    <test>
                      <equal>
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="em"/>
                      </equal>
                    </test>
                    <let>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit v="dans"/>
                    </let>
                  </when>
                  <when>
                    <test>
                      <equal>
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="por"/>
                      </equal>
                    </test>
                    <let>
                      <clip pos="1" side="tl" part="lem"/>
                      <lit v="pour"/>
                    </let>
                  </when>
                </choose>
              </when>
            </choose>
            <out>
              <chunk name="prep_rel" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SPREP"/></tag>
                  <tag><clip pos="2" side="tl" part="tipus_prn"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_prn"/>
                  <clip pos="2" side="tl" part="tipus_prn"/>
                  <var n="genero"/>
                  <var n="numero"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="cuyo nombre -&gt; dont le nom">
      <pattern>
        <pattern-item n="cuyo"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="def_det">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="det_nom">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <lit v="le"/>
              <var n="etiq_det"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="cuyo nom adj -&gt; dont le nom adj">
      <pattern>
        <pattern-item n="cuyo"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>

        <call-macro n="def_det">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="det_nom_adj">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <lit v="le"/>
              <var n="etiq_det"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="cuyo adj nom -&gt; dont le adj nom">
      <pattern>
        <pattern-item n="cuyo"/>
        <pattern-item n="adj"/>
        <pattern-item n="nom"/>
      </pattern>

      <action>
        <call-macro n="det_nb2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="det_gd2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="def_det">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="rel" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_prn"/>
              <clip pos="1" side="tl" part="tipus_prn"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="det_nom_adj">
            <tags>
              <tag><lit-tag v="SN.DET"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <lit v="le"/>
              <var n="etiq_det"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <var n="genero"/>
              <var n="numero"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="cnjcoo">
      <pattern>
        <pattern-item n="cnjcoo"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="cnjcoo" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="CNJ">
      <pattern>
        <pattern-item n="cnj"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="cnj" case="caseFirstWord">
            <tags>
              <tag><clip pos="1" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="PREP">
      <pattern>
        <pattern-item n="prep"/>
      </pattern>

      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <let>
          <var n="lema"/>
          <clip pos="1" side="tl" part="lem"/>
        </let>
        <out>
          <chunk namefrom="lema" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PREP"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NUMERAL">
      <pattern>
        <pattern-item n="numeral"/>
      </pattern>

      <action>
        <call-macro n="det_nb">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="det_gd">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>

        <out>
          <chunk name="num" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="genero"/>
              <var n="numero"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule comment="NUMERAL en cifra">
      <pattern>
        <pattern-item n="cifra"/>
      </pattern>

      <action>
        <out>
          <chunk name="cifra" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><lit-tag v="mf"/></tag>
              <tag><lit-tag v="sp"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <lit-tag v="mf"/>
              <lit-tag v="sp"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
    </rule>


    <rule>
      <!-- REGLA: reset variables -->
      <pattern>
        <pattern-item n="sent"/>
      </pattern>

      <action>
        <let>
          <var n="numero"/>
          <lit-tag v="sg"/>
        </let>
        <let>
          <var n="genero"/>
          <lit-tag v="m"/>
        </let>
        <choose>
          <when>
            <test>
              <not>
                <or>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=";"/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v=":"/>
                  </equal>
                </or>
              </not>
            </test>
            <let>
              <var n="EOS"/>
              <lit v="true"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="punt">
            <tags>
              <tag><lit-tag v="sent"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule>
      <!-- REGLA: coma -->
      <pattern>
        <pattern-item n="coma"/>
      </pattern>

      <action>
        <out>
          <chunk name="coma">
            <tags>
              <tag><lit-tag v="cm"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule>
      <!-- REGLA: elimina ? i ! -->
      <pattern>
        <pattern-item n="lquest"/>
      </pattern>

      <action>
      </action>
    </rule>


<!--
    separate rules for the personal pronoun case and the general case
    because some personal pronouns require particular forms
-->
    <rule comment="REGLA: tanto NOM quanto PRNPERSSUBJ">
      <pattern>
        <pattern-item n="tanto"/>
        <pattern-item n="nom"/>
        <pattern-item n="quanto"/>
        <pattern-item n="prnperssubj"/>
      </pattern>

      <action>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="4" side="tl" part="lem"/>
                <lit v="je"/>
              </equal>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="moi"/>
            </let>
          </when>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="4" side="tl" part="lem"/>
                <lit v="tu"/>
              </equal>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="toi"/>
            </let>
          </when>
          <when>
            <test>
              <and>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="lem"/>
                  <lit v="il"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </equal>
              </and>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="lui"/>
            </let>
          </when>
          <when>
            <test>
              <and>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="lem"/>
                  <lit v="il"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="pl"/>
                </equal>
              </and>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="eux"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="tanto_nom_quanto_prnperssubj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <lit v="autant"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <lit v="que"/>
              <lit-tag v="cnjsub"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: tão ADJ quanto PRNPERSSUBJ">
      <pattern>
        <pattern-item n="tão"/>
        <pattern-item n="adjec"/>
        <pattern-item n="quanto"/>
        <pattern-item n="prnperssubj"/>
      </pattern>

      <action>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="4" side="tl" part="lem"/>
                <lit v="je"/>
              </equal>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="moi"/>
            </let>
          </when>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="4" side="tl" part="lem"/>
                <lit v="tu"/>
              </equal>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="toi"/>
            </let>
          </when>
          <when>
            <test>
              <and>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="lem"/>
                  <lit v="il"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="sg"/>
                </equal>
              </and>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="lui"/>
            </let>
          </when>
          <when>
            <test>
              <and>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="lem"/>
                  <lit v="il"/>
                </equal>
                <equal caseless="yes">
                  <clip pos="4" side="tl" part="nbr"/>
                  <lit-tag v="pl"/>
                </equal>
              </and>
            </test>
            <let>
              <clip pos="4" side="tl" part="lem"/>
              <lit v="eux"/>
            </let>
          </when>
        </choose>
        <out>
          <chunk name="tão_adj_quanto_prnperssubj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <lit v="aussi"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <lit v="que"/>
              <lit-tag v="cnjsub"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: tanto NOM quanto">
      <pattern>
        <pattern-item n="tanto"/>
        <pattern-item n="nom"/>
        <pattern-item n="quanto"/>
      </pattern>

      <action>
        <out>
          <chunk name="tanto_nom_quanto">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <lit v="autant"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <lit v="que"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: tão ADJ quanto">
      <pattern>
        <pattern-item n="tão"/>
        <pattern-item n="adjec"/>
        <pattern-item n="quanto"/>
      </pattern>

      <action>
        <out>
          <chunk name="tão_adj_quanto">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="tags"/></tag>
            </tags>
            <lu>
              <lit v="aussi"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <lit v="que"/>
              <lit-tag v="cnjsub"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

  </section-rules>

</transfer>
